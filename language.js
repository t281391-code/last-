// Language Management - Internationalization (i18n)
// Translations object
const translations = {
    en: {
        createTask: 'Create new task',
        dashboard: 'Dashboard',
        analytics: 'Analytics',
        taskList: 'Task List',
        inbox: 'Inbox',
        tracking: 'Tracking',
        setting: 'Setting',
        calendar: 'Calendar',
        goPro: 'Go Pro',
        unlockFeatures: 'Unlock all features',
        upgrade: 'Upgrade',
        greeting: 'WELCOME to task management',
        search: 'Search...',
        project: 'Project',
        client: 'Client',
        review: 'Review',
        taskProgress: 'Task Progress',
        successfulTask: 'Successful Task',
        taskPassed: 'Task passed',
        taskNotPassed: 'Task not passed',
        activity: 'Activity',
        meetings: 'Meetings',
        thisWeek: 'This week',
        weeklyBudget: 'Weekly budget',
        monthlyBudget: 'Monthly budget',
        myProfile: 'My profile',
        projectManager: 'Project Manager',
        viewAll: 'View all',
        myTasks: 'My Tasks',
        augustMonday: 'August, Monday',
        mon: 'Mon',
        tue: 'Tue',
        wed: 'Wed',
        thu: 'Thu',
        fri: 'Fri',
        sat: 'Sat',
        sun: 'Sun',
        coffeeBreak: 'Coffee break',
        newBranding: 'New Branding',
        development: 'Development',
        createNewTask: 'Create New Task',
        taskTitle: 'Task Title',
        taskDescription: 'Description',
        dueDate: 'Due Date',
        priority: 'Priority',
        category: 'Category',
        low: 'Low',
        medium: 'Medium',
        high: 'High',
        work: 'Work',
        personal: 'Personal',
        urgent: 'Urgent',
        cancel: 'Cancel',
        noTasks: 'No tasks yet. Create your first task!',
        completed: 'Completed',
        delete: 'Delete',
        exportData: 'Export Data',
        importData: 'Import Data',
        exportSuccess: 'Tasks exported successfully!',
        importSuccess: 'Tasks imported successfully!',
        importError: 'Failed to import tasks',
        startDate: 'Start Date',
        endDate: 'End Date',
        edit: 'Edit',
        check: 'Check',
        language: 'Language',
        theme: 'Theme',
        darkMode: 'Dark Mode',
        addNote: 'Add Note',
        noteText: 'Note Text',
        noteTime: 'Time (optional)',
        save: 'Save',
        noNotes: 'No notes for this date',
        logout: 'Log out',
        evaluateYourself: 'Evaluate yourself',
        finishTask: 'Complete',
        moveToTaskList: 'Move to Task List'
    },
    mn: {
        createTask: 'Шинэ даалгавар үүсгэх',
        dashboard: 'Хяналтын самбар',
        analytics: 'Шинжилгээ',
        taskList: 'Даалгаврын жагсаалт',
        inbox: 'Ирсэн',
        tracking: 'Хянах',
        setting: 'Тохиргоо',
        calendar: 'Календар',
        goPro: 'Pro болох',
        unlockFeatures: 'Бүх онцлогуудыг нээх',
        upgrade: 'Шинэчлэх',
        greeting: 'ТАСК Менежмент-д тавтай морилно уу ',
        search: 'Хайх...',
        project: 'Төсөл',
        client: 'Харилцагч',
        review: 'Шүүмж',
        taskProgress: 'Даалгаврын явц',
        successfulTask: 'Амжилттай даалгавар',
        taskPassed: 'Даалгавар давсан',
        taskNotPassed: 'Даалгавар давсангүй',
        activity: 'Үйл ажиллагаа',
        meetings: 'Уулзалтууд',
        thisWeek: 'Энэ долоо хоног',
        weeklyBudget: 'Долоо хоногийн төсөв',
        monthlyBudget: 'Сарын төсөв',
        myProfile: 'Миний профайл',
        projectManager: 'Төслийн менежер',
        viewAll: 'Бүгдийг харах',
        myTasks: 'Миний даалгаврууд',
        augustMonday: 'Наймдугаар сар, Даваа',
        mon: 'Да',
        tue: 'Мя',
        wed: 'Лх',
        thu: 'Пү',
        fri: 'Ба',
        sat: 'Бя',
        sun: 'Ня',
        coffeeBreak: 'Кофе уух',
        newBranding: 'Шинэ брэнд',
        development: 'Хөгжүүлэлт',
        createNewTask: 'Шинэ даалгавар үүсгэх',
        taskTitle: 'Даалгаврын гарчиг',
        taskDescription: 'Тайлбар',
        dueDate: 'Дуусах огноо',
        priority: 'Анхаарал',
        category: 'Ангилал',
        low: 'Бага',
        medium: 'Дунд',
        high: 'Өндөр',
        work: 'Ажил',
        personal: 'Хувийн',
        urgent: 'Яаралтай',
        cancel: 'Цуцлах',
        noTasks: 'Одоогоор даалгавар байхгүй. Эхний даалгавраа үүсгээрэй!',
        completed: 'Дууссан',
        delete: 'Устгах',
        exportData: 'Өгөгдөл экспорт хийх',
        importData: 'Өгөгдөл импорт хийх',
        exportSuccess: 'Даалгаврууд амжилттай экспорт хийгдлээ!',
        importSuccess: 'Даалгаврууд амжилттай импорт хийгдлээ!',
        importError: 'Даалгаврууд импорт хийхэд алдаа гарлаа',
        startDate: 'Эхлэх огноо',
        endDate: 'Дуусах огноо',
        edit: 'Засах',
        check: 'Шалгах',
        language: 'Хэл',
        theme: 'Гадаад байдал',
        darkMode: 'Харанхуй горим',
        addNote: 'Тэмдэглэл нэмэх',
        noteText: 'Тэмдэглэл',
        noteTime: 'Цаг (сонголттой)',
        save: 'Хадгалах',
        noNotes: 'Энэ өдөр тэмдэглэл байхгүй',
        logout: 'Гарах',
        evaluateYourself: 'Өөрийгөө үнэлэх',
        finishTask: 'Дуусгах',
        moveToTaskList: 'Даалгаврын жагсаалт руу шилжүүлэх'
    }
};

// Language Manager Class
class LanguageManager {
    constructor() {
        this.currentLanguage = localStorage.getItem('language') || 'en';
        this.translations = translations;
    }

    // Get current language
    getCurrentLanguage() {
        return this.currentLanguage;
    }

    // Set language
    setLanguage(lang) {
        if (this.translations[lang]) {
            this.currentLanguage = lang;
            localStorage.setItem('language', lang);
            this.updatePageLanguage();
            return true;
        }
        return false;
    }

    // Get translation for a key
    translate(key) {
        return this.translations[this.currentLanguage]?.[key] || key;
    }

    // Update all elements on the page with translations
    updatePageLanguage() {
        // Update HTML lang attribute
        document.documentElement.lang = this.currentLanguage;

        // Update all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.translate(key);
            if (translation) {
                element.textContent = translation;
            }
        });

        // Update placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            const translation = this.translate(key);
            if (translation) {
                element.placeholder = translation;
            }
        });
        
        // Re-render dynamic content that depends on language
        if (typeof showTaskListPage === 'function') {
            const currentPage = typeof appState !== 'undefined' ? appState.getStateProperty('currentPage') : 'dashboard';
            if (currentPage === 'taskList') {
                showTaskListPage();
            }
        }
        
        if (typeof renderTasks === 'function') {
            const tasks = typeof appState !== 'undefined' ? appState.getStateProperty('tasks') : [];
            renderTasks(tasks);
        }
    }

    // Initialize language on page load
    init() {
        this.updatePageLanguage();
    }
}

// Create global language manager instance
const languageManager = new LanguageManager();

// Export for use in other files
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, LanguageManager, languageManager };
}

